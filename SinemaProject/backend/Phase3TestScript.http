### 🎯 PHASE 3 TEST SCRIPT - Hall & Seat Layout Management
### Adım adım endpoint test rehberi

# 📝 DEĞIŞKENLER - Gerçek değerlerle güncelle
@baseUrl = http://localhost:5238
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyZTgzM2MzNy0wNmZmLTRlNjYtOWI3OS1lMGNkZWVhZGZlZmIiLCJlbWFpbCI6InRlc3RhZG1pbmt1cnNhdEBjaW5lbWEubG9jYWwiLCJqdGkiOiI0ZDU0YjIyZC05MDU2LTQ5NDAtYWJhOC0yZjRlNmNiYmZkZDciLCJpYXQiOjE3NTc5MDMzMTUsImRpc3BsYXlfbmFtZSI6IlRlc3QgQWRtaW5pc3RyYXRvciIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwiZXhwIjoxNzU3OTA0MjE1LCJpc3MiOiJjaW5lbWEubG9jYWwiLCJhdWQiOiJjaW5lbWEubG9jYWwifQ.RtWmZNElhcGw6PAkPbrGUv3NFeu2zUbKKegPVgjSmnk
@hallId = 6B61D60A-5AE0-470F-839B-B39C2248FB3E
@layoutId = 1FE38DD6-B8EC-4888-B896-07DC59772B8A
@screeningId = 45D85852-CC36-4588-8411-9DB798902430

# 🔐 ADIM 1: LOGIN
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "testadminkursat@cinema.local",
  "password": "TestAdmin123!"
}

### ✅ Yukarıdan dönen accessToken'ı kopyala ve @accessToken yerine yapıştır

# 🏢 ADIM 2: HALL'LARI LİSTELE
GET {{baseUrl}}/api/v1/halls

### ✅ Dönen hall ID'lerinden birini kopyala ve @hallId yerine yapıştır

# 📋 ADIM 3: HALL'IN MEVCUT LAYOUT'LARINI GÖRÜNTÜLE
GET {{baseUrl}}/api/v1/halls/{{hallId}}/layouts
Authorization: Bearer {{accessToken}}

# 🎯 ADIM 4: AKTİF LAYOUT'U GÖRÜNTÜLE (varsa)
GET {{baseUrl}}/api/v1/halls/{{hallId}}/layout?version=active
Authorization: Bearer {{accessToken}}

# ➕ ADIM 5: YENİ LAYOUT VERSİYONU EKLE
POST {{baseUrl}}/api/v1/halls/{{hallId}}/layouts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "seats": [
    {"row": 1, "col": 1, "label": "A1"},
    {"row": 1, "col": 2, "label": "A2"},
    {"row": 1, "col": 3, "label": "A3"},
    {"row": 2, "col": 1, "label": "B1"},
    {"row": 2, "col": 2, "label": "B2"},
    {"row": 2, "col": 3, "label": "B3"}
  ]
}

### ✅ Yukarıdan dönen layout ID'sini kopyala ve @layoutId yerine yapıştır

# 🔄 ADIM 6: LAYOUT'U AKTİF YAPA
POST {{baseUrl}}/api/v1/halls/{{hallId}}/layouts/{{layoutId}}/activate
Authorization: Bearer {{accessToken}}

# 📊 ADIM 7: GÜNCEL LAYOUT'LARI KONTROL ET
GET {{baseUrl}}/api/v1/halls/{{hallId}}/layouts
Authorization: Bearer {{accessToken}}

# 🎬 ADIM 8: SCREENING KOLTUK DURUMLARINI GÖRÜNTÜLE
GET {{baseUrl}}/api/v1/screenings/{{screeningId}}/seats

### ✅ Gerçek screening ID'si için database'e bak veya seed data'ya gel

# 🧪 EKSTRA TEST: DOĞRULAMA HATASI TESTİ
POST {{baseUrl}}/api/v1/halls/{{hallId}}/layouts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "seats": [
    {"row": 1, "col": 1, "label": "A1"},
    {"row": 1, "col": 1, "label": "A1_duplicate"}
  ]
}

### ❌ Bu aynı pozisyon için validation hatası dönmeli

### 📋 BAŞARI KRİTERLERİ:
### ✅ Login: 200 OK + valid token
### ✅ Get Halls: 200 OK + hall listesi  
### ✅ Get Layouts: 200 OK + layout listesi
### ✅ Add Layout: 201 Created + yeni layout
### ✅ Activate Layout: 204 No Content
### ✅ Get Seat Status: 200 OK + seat grid
